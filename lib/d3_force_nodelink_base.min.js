!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3-selection"),require("d3-force"),require("d3-scale"),require("d3-scale-chromatic"),require("d3-array"),require("d3-drag")):"function"==typeof define&&define.amd?define("d3_force_nodelink_base",["d3-selection","d3-force","d3-scale","d3-scale-chromatic","d3-array","d3-drag"],e):"object"==typeof exports?exports.d3_force_nodelink_base=e(require("d3-selection"),require("d3-force"),require("d3-scale"),require("d3-scale-chromatic"),require("d3-array"),require("d3-drag")):t.d3_force_nodelink_base=e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}("undefined"!=typeof self?self:this,function(t,e,r,n,o,i){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e){t.exports=i},function(t,e,r){"use strict";r.r(e);var n=r(0),o=r(2),i=r(3),a=r(1),c=r(4),l=r(5);const s={select:n.select,selectAll:n.selectAll,get event(){return n.event},scaleOrdinal:o.scaleOrdinal,scaleLinear:o.scaleLinear,schemeCategory10:i.schemeCategory10,forceManyBody:a.forceManyBody,forceSimulation:a.forceSimulation,forceLink:a.forceLink,forceCenter:a.forceCenter,extent:c.extent,drag:l.drag};var u=class{constructor(t={}){const e={element:null,data:null,width:960,color:s.scaleOrdinal(s.schemeCategory10),forceStrength:-2,sizeField:"flow",colorField:"cl_top"};Object.assign(this,e,t),this._data=this.data,this.data=this.updateData,void 0!==this.height&&null!==this.height||(this.height=.625*this.width),this.manyBody=s.forceManyBody().strength(this.forceStrength),this.init=!1,console.log(this._data),null!==this.element&&null!==this._data&&(this.draw(this.element),this.init=!0)}getLinkId(t,e=!1){var r=[t.source.toString(),t.target.toString()];return!0===e&&r.sort(),r[0]+"-&-"+r[1]}updateData(t){return arguments.length?(this._data=t,!1===this.init?(this.draw(this.element),this.init=!0):console.log("UPDATING DATA NOT YET IMPLEMENTED"),this):this._data}draw(t){var e=this,r=this.width,o=this.height,i=this._data,a=this.manyBody,c=this.color,l=this.getLinkId,u=this.sizeField,d=this.colorField;return t.each(function(){var t=s.select(this).append("svg").attr("width",r).attr("height",o);function f(t){s.event.active||g.alphaTarget(.3).restart(),console.log(n.event),console.log(s.event),t.fx=t.x,t.fy=t.y}function h(t){t.fx=s.event.x,t.fy=s.event.y}function y(t){s.event.active||g.alphaTarget(0),t.fx=null,t.fy=null}console.log(i),i.nodes.forEach(function(t){t.id=t.id.toString()}),i.links.forEach(function(t){t.source=t.source.toString(),t.target=t.target.toString(),t.id=l(t,i.directed)});var g=s.forceSimulation().force("link",s.forceLink().id(function(t){return t.id})).force("charge",a).force("center",s.forceCenter(r/2,o/2));g.nodes(i.nodes).on("tick",function(){v.attr("cx",function(t){return t.x=Math.max(t.radius,Math.min(r-t.radius,t.x)),t.x}).attr("cy",function(t){return t.y=Math.max(t.radius,Math.min(r-t.radius,t.y)),t.y}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),m.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y})}),g.force("link").links(i.links),e.simulation=g;var p=s.scaleLinear().range([4,12]),x=t.append("g"),m=x.append("g").attr("class","links").selectAll(".link");m=m.data(i.links,function(t){return t.id});var v=x.append("g").attr("class","nodes").selectAll(".node");v=function(t,e=null){var n=c(0);p.domain(s.extent(i.nodes,function(t){return t.hasOwnProperty(u)?t[u]:[5,5]}));var a=t.enter().append("g").attr("class","node").call(s.drag().on("start",f).on("drag",h).on("end",y));return t=t.merge(a).attr("cx",function(t){return t.x=r/2+t.x}).attr("cy",function(t){return t.y=o/2+t.y}).each(function(t){t.hasOwnProperty(u)?t.radius=p(t[u]):t.radius=5,t.hasOwnProperty(d)?t.color=c(t[d]):t.color=n}),a.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).append("circle").attr("fill",function(t){return t.color}).attr("r",0),null!==e?t.selectAll("circle").transition(e).attr("r",function(t){return t.radius}).attr("fill",function(t){return t.color}):t.selectAll("circle").attr("r",function(t){return t.radius}).attr("fill",function(t){return t.color}),t}(v=v.data(i.nodes,function(t){return t.id})),m=function(t,e=null){var r=t.enter().append("line").attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}).attr("class","link");return(t=t.merge(r)).attr("stroke-width",function(t){return Math.sqrt(t.weight)}),null!==e&&r.style("stroke","green"),t}(m),t.on("click",function(){v.classed("focus",!1),v.selectAll("text").style("display","none"),m.style("opacity",1)})}),this}};r.d(e,"d3ForceNodeLink",function(){return u})}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kM19mb3JjZV9ub2RlbGlua19iYXNlL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9kM19mb3JjZV9ub2RlbGlua19iYXNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2QzX2ZvcmNlX25vZGVsaW5rX2Jhc2UvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcImQzLXNlbGVjdGlvblwiLFwiY29tbW9uanMyXCI6XCJkMy1zZWxlY3Rpb25cIixcImFtZFwiOlwiZDMtc2VsZWN0aW9uXCIsXCJyb290XCI6XCJkM1wifSIsIndlYnBhY2s6Ly9kM19mb3JjZV9ub2RlbGlua19iYXNlL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJkMy1mb3JjZVwiLFwiY29tbW9uanMyXCI6XCJkMy1mb3JjZVwiLFwiYW1kXCI6XCJkMy1mb3JjZVwiLFwicm9vdFwiOlwiZDNcIn0iLCJ3ZWJwYWNrOi8vZDNfZm9yY2Vfbm9kZWxpbmtfYmFzZS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwiZDMtc2NhbGVcIixcImNvbW1vbmpzMlwiOlwiZDMtc2NhbGVcIixcImFtZFwiOlwiZDMtc2NhbGVcIixcInJvb3RcIjpcImQzXCJ9Iiwid2VicGFjazovL2QzX2ZvcmNlX25vZGVsaW5rX2Jhc2UvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcImQzLXNjYWxlLWNocm9tYXRpY1wiLFwiY29tbW9uanMyXCI6XCJkMy1zY2FsZS1jaHJvbWF0aWNcIixcImFtZFwiOlwiZDMtc2NhbGUtY2hyb21hdGljXCIsXCJyb290XCI6XCJkM1wifSIsIndlYnBhY2s6Ly9kM19mb3JjZV9ub2RlbGlua19iYXNlL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJkMy1hcnJheVwiLFwiY29tbW9uanMyXCI6XCJkMy1hcnJheVwiLFwiYW1kXCI6XCJkMy1hcnJheVwiLFwicm9vdFwiOlwiZDNcIn0iLCJ3ZWJwYWNrOi8vZDNfZm9yY2Vfbm9kZWxpbmtfYmFzZS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwiZDMtZHJhZ1wiLFwiY29tbW9uanMyXCI6XCJkMy1kcmFnXCIsXCJhbWRcIjpcImQzLWRyYWdcIixcInJvb3RcIjpcImQzXCJ9Iiwid2VicGFjazovL2QzX2ZvcmNlX25vZGVsaW5rX2Jhc2UvLi9zcmMvdmlzLmpzIiwid2VicGFjazovL2QzX2ZvcmNlX25vZGVsaW5rX2Jhc2UvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fM19fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNV9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImQzIiwic2VsZWN0Iiwic2VsZWN0QWxsIiwiZXZlbnQiLCJkM2V2ZW50Iiwic2NhbGVPcmRpbmFsIiwic2NhbGVMaW5lYXIiLCJzY2hlbWVDYXRlZ29yeTEwIiwiZm9yY2VNYW55Qm9keSIsImZvcmNlU2ltdWxhdGlvbiIsImZvcmNlTGluayIsImZvcmNlQ2VudGVyIiwiZXh0ZW50IiwiZHJhZyIsImQzRm9yY2VOb2RlTGluayIsImNvbnN0cnVjdG9yIiwib3B0cyIsImRlZmF1bHRzIiwiZWxlbWVudCIsImRhdGEiLCJ3aWR0aCIsImNvbG9yIiwiZm9yY2VTdHJlbmd0aCIsInNpemVGaWVsZCIsImNvbG9yRmllbGQiLCJhc3NpZ24iLCJfZGF0YSIsInVwZGF0ZURhdGEiLCJoZWlnaHQiLCJtYW55Qm9keSIsInN0cmVuZ3RoIiwiaW5pdCIsImNvbnNvbGUiLCJsb2ciLCJkcmF3IiwiZ2V0TGlua0lkIiwibGluayIsImRpcmVjdGVkIiwiaXRlbXMiLCJzb3VyY2UiLCJ0b1N0cmluZyIsInRhcmdldCIsInNvcnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzZWxlY3Rpb24iLCJvYmoiLCJncmFwaCIsImVhY2giLCJzdmciLCJhcHBlbmQiLCJhdHRyIiwiZHJhZ3N0YXJ0ZWQiLCJhY3RpdmUiLCJzaW11bGF0aW9uIiwiYWxwaGFUYXJnZXQiLCJyZXN0YXJ0IiwiZngiLCJ4IiwiZnkiLCJ5IiwiZHJhZ2dlZCIsImRyYWdlbmRlZCIsIm5vZGVzIiwiZm9yRWFjaCIsImlkIiwibGlua3MiLCJmb3JjZSIsIm9uIiwibm9kZSIsIk1hdGgiLCJtYXgiLCJyYWRpdXMiLCJtaW4iLCJzaXplU2NhbGUiLCJyYW5nZSIsImciLCJkZWZhdWx0Q29sb3IiLCJkb21haW4iLCJub2RlRW50ZXIiLCJlbnRlciIsIm1lcmdlIiwidHJhbnNpdGlvbiIsImVudGVyTm9kZXMiLCJsaW5rRW50ZXIiLCJzcXJ0Iiwid2VpZ2h0Iiwic3R5bGUiLCJlbnRlckxpbmtzIiwiY2xhc3NlZCIsIl9fd2VicGFja19leHBvcnRzX18iLCJ2aXMiXSwibWFwcGluZ3MiOiJDQUFBLFNBQUFBLEVBQUFDLEdBQ0EsaUJBQUFDLFNBQUEsaUJBQUFDLE9BQ0FBLE9BQUFELFFBQUFELEVBQUFHLFFBQUEsZ0JBQUFBLFFBQUEsWUFBQUEsUUFBQSxZQUFBQSxRQUFB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RUE0RURjLENBRlBkLEVBQU9BLEVBQUtsRCxLQUFLNEIsRUFBTWdCLE1BQU8sU0FBU3pGLEdBQUssT0FBT0EsRUFBRTJGLE1BR3JEN0IsRUExRUEsU0FBb0JBLEVBQU1sRCxFQUFJLE1BSTdCLElBQUlrRyxFQUFZaEQsRUFBSzRDLFFBQVE5QixPQUFPLFFBQ2xDQyxLQUFLLEtBQU0sU0FBUzdFLEdBQUssT0FBT0EsRUFBRWlFLE9BQU9tQixJQUN6Q1AsS0FBSyxLQUFNLFNBQVM3RSxHQUFLLE9BQU9BLEVBQUVpRSxPQUFPcUIsSUFDekNULEtBQUssS0FBTSxTQUFTN0UsR0FBSyxPQUFPQSxFQUFFbUUsT0FBT2lCLElBQ3pDUCxLQUFLLEtBQU0sU0FBUzdFLEdBQUssT0FBT0EsRUFBRW1FLE9BQU9tQixJQUN6Q1QsS0FBSyxRQUFTLFFBZWhCLE9BZEFmLEVBQU9BLEVBQUs2QyxNQUFNRyxJQUVmakMsS0FBSyxlQUFnQixTQUFTN0UsR0FBSyxPQUFPZ0csS0FBS2UsS0FBSy9HLEVBQUVnSCxVQUUvQyxPQUFOcEcsR0FDSGtHLEVBRUVHLE1BQU0sU0FBVSxTQU9abkQsRUFrRERvRCxDQUFXcEQsR0EwRGxCYSxFQUFJbUIsR0FBRyxRQVBQLFdBQ0NDLEVBQUtvQixRQUFRLFNBQVMsR0FDdEJwQixFQUFLbkUsVUFBVSxRQUFRcUYsTUFBTSxVQUFXLFFBR3hDbkQsRUFBS21ELE1BQU0sVUFBVyxPQVFsQmpJLE9DdFZSUSxFQUFBUSxFQUFBb0gsRUFBQSxvQ0FBQUMiLCJmaWxlIjoiZDNfZm9yY2Vfbm9kZWxpbmtfYmFzZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJkMy1zZWxlY3Rpb25cIiksIHJlcXVpcmUoXCJkMy1mb3JjZVwiKSwgcmVxdWlyZShcImQzLXNjYWxlXCIpLCByZXF1aXJlKFwiZDMtc2NhbGUtY2hyb21hdGljXCIpLCByZXF1aXJlKFwiZDMtYXJyYXlcIiksIHJlcXVpcmUoXCJkMy1kcmFnXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiZDNfZm9yY2Vfbm9kZWxpbmtfYmFzZVwiLCBbXCJkMy1zZWxlY3Rpb25cIiwgXCJkMy1mb3JjZVwiLCBcImQzLXNjYWxlXCIsIFwiZDMtc2NhbGUtY2hyb21hdGljXCIsIFwiZDMtYXJyYXlcIiwgXCJkMy1kcmFnXCJdLCBmYWN0b3J5KTtcblx0ZWxzZSBpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcpXG5cdFx0ZXhwb3J0c1tcImQzX2ZvcmNlX25vZGVsaW5rX2Jhc2VcIl0gPSBmYWN0b3J5KHJlcXVpcmUoXCJkMy1zZWxlY3Rpb25cIiksIHJlcXVpcmUoXCJkMy1mb3JjZVwiKSwgcmVxdWlyZShcImQzLXNjYWxlXCIpLCByZXF1aXJlKFwiZDMtc2NhbGUtY2hyb21hdGljXCIpLCByZXF1aXJlKFwiZDMtYXJyYXlcIiksIHJlcXVpcmUoXCJkMy1kcmFnXCIpKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJkM19mb3JjZV9ub2RlbGlua19iYXNlXCJdID0gZmFjdG9yeShyb290W1wiZDNcIl0sIHJvb3RbXCJkM1wiXSwgcm9vdFtcImQzXCJdLCByb290W1wiZDNcIl0sIHJvb3RbXCJkM1wiXSwgcm9vdFtcImQzXCJdKTtcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzLCBmdW5jdGlvbihfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzRfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNV9fKSB7XG5yZXR1cm4gIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDYpO1xuIiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18wX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18yX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18zX187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX180X187IiwibW9kdWxlLmV4cG9ydHMgPSBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181X187IiwiLy8gZDNGb3JjZU5vZGVMaW5rXG5cbi8vIGltcG9ydCAqIGFzIGQzIGZyb20gJ2QzJztcbi8vIGltcG9ydCBqUXVlcnkgZnJvbSAnanF1ZXJ5Jztcbi8vIGNvbnN0ICQgPSBqUXVlcnk7XG5cbmltcG9ydCB7c2VsZWN0LCBzZWxlY3RBbGwsIGV2ZW50IGFzIGQzZXZlbnR9IGZyb20gJ2QzLXNlbGVjdGlvbic7XG5pbXBvcnQge3NjYWxlT3JkaW5hbCwgc2NhbGVMaW5lYXJ9IGZyb20gJ2QzLXNjYWxlJztcbmltcG9ydCB7c2NoZW1lQ2F0ZWdvcnkxMH0gZnJvbSAnZDMtc2NhbGUtY2hyb21hdGljJztcbmltcG9ydCB7Zm9yY2VNYW55Qm9keSwgZm9yY2VTaW11bGF0aW9uLCBmb3JjZUxpbmssIGZvcmNlQ2VudGVyfSBmcm9tICdkMy1mb3JjZSc7XG5pbXBvcnQge2V4dGVudH0gZnJvbSAnZDMtYXJyYXknO1xuaW1wb3J0IHtkcmFnfSBmcm9tICdkMy1kcmFnJztcblxuY29uc3QgZDMgPSB7XG5cdHNlbGVjdCwgXG5cdHNlbGVjdEFsbCwgXG5cdGdldCBldmVudCgpIHtyZXR1cm4gZDNldmVudDt9LCBcblx0c2NhbGVPcmRpbmFsLCBcblx0c2NhbGVMaW5lYXIsIFxuXHRzY2hlbWVDYXRlZ29yeTEwLCBcblx0Zm9yY2VNYW55Qm9keSwgXG5cdGZvcmNlU2ltdWxhdGlvbiwgXG5cdGZvcmNlTGluaywgXG5cdGZvcmNlQ2VudGVyLCBcblx0ZXh0ZW50LCBcblx0ZHJhZ1xufVxuLy8gZDMuZXZlbnQgaXMgYSBsaXZlIGJpbmRpbmcsIHNvIG5lZWQgdG8gdXNlIGdldHRlclxuXG5cbmNsYXNzIGQzRm9yY2VOb2RlTGluayB7XG5cdGNvbnN0cnVjdG9yKG9wdHMgPSB7fSkge1xuXHRcdGNvbnN0IGRlZmF1bHRzID0ge1xuXHRcdFx0ZWxlbWVudDogbnVsbCxcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHR3aWR0aDogOTYwLFxuXHRcdFx0Y29sb3I6IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKSxcblx0XHRcdGZvcmNlU3RyZW5ndGg6IC0yLFxuXHRcdFx0c2l6ZUZpZWxkOiAnZmxvdycsICAvLyBmaWVsZCB3aXRoIGNvbnRpbnVvdXMgdmFyaWFibGUgdG8gdXNlIGZvciBzaXplXG5cdFx0XHRjb2xvckZpZWxkOiAnY2xfdG9wJywgIC8vIGNhdGVnb3JpY2FsIGZpZWxkIHRvIHVzZSBmb3IgY29sb3JzXG5cdFx0fTtcblx0XHRPYmplY3QuYXNzaWduKHRoaXMsIGRlZmF1bHRzLCBvcHRzKTsgIC8vIG9wdHMgd2lsbCBvdmVyd3JpdGUgZGVmYXVsdHNcblx0XHR0aGlzLl9kYXRhID0gdGhpcy5kYXRhO1xuXHRcdHRoaXMuZGF0YSA9IHRoaXMudXBkYXRlRGF0YTtcblx0XHRpZiAodHlwZW9mIHRoaXMuaGVpZ2h0ID09PSAndW5kZWZpbmVkJyB8fCB0aGlzLmhlaWdodCA9PT0gbnVsbCkge1xuXHRcdFx0dGhpcy5oZWlnaHQgPSAuNjI1ICogdGhpcy53aWR0aDtcblx0XHR9XG5cdFx0dGhpcy5tYW55Qm9keSA9IGQzLmZvcmNlTWFueUJvZHkoKVxuXHRcdFx0XHRcdFx0XHQuc3RyZW5ndGgodGhpcy5mb3JjZVN0cmVuZ3RoKTtcblx0XHR0aGlzLmluaXQgPSBmYWxzZTtcblx0XHRjb25zb2xlLmxvZyh0aGlzLl9kYXRhKTtcblx0XHRpZiAodGhpcy5lbGVtZW50ICE9PSBudWxsICYmIHRoaXMuX2RhdGEgIT09IG51bGwpIHtcblx0XHRcdHRoaXMuZHJhdyh0aGlzLmVsZW1lbnQpO1xuXHRcdFx0dGhpcy5pbml0ID0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHRnZXRMaW5rSWQobGluaywgZGlyZWN0ZWQgPSBmYWxzZSkge1xuXHRcdC8vIGxpbmsgSUQgd2lsbCBiZSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGUgc291cmNlIElEIGFuZCB0YXJnZXQgSUQsIHNlcGFyYXRlZCBieSBcIi0mLVwiXG5cdFx0Ly8gSWYgdGhlIGdyYXBoIGlzIHVuZGlyZWN0ZWQsIHRoZSBJRHMgd2lsbCBiZSBzb3J0ZWQgQUxQSEFCRVRJQ0FMTFkgdXNpbmcgdGhlIHN0cmluZyB2YWx1ZXMgb2YgdGhlIElEXG5cdFx0dmFyIHNvdXJjZSA9IGxpbmsuc291cmNlLnRvU3RyaW5nKCk7XG5cdFx0dmFyIHRhcmdldCA9IGxpbmsudGFyZ2V0LnRvU3RyaW5nKCk7XG5cdFx0dmFyIGl0ZW1zID0gW3NvdXJjZSwgdGFyZ2V0XTtcblx0XHR2YXIgc2VwID0gXCItJi1cIjtcblx0XHRpZiAoZGlyZWN0ZWQgPT09IHRydWUpIHtcblx0XHRcdGl0ZW1zLnNvcnQoKTtcblx0XHR9XG5cdFx0cmV0dXJuIGl0ZW1zWzBdICsgc2VwICsgaXRlbXNbMV07XG5cdH1cblxuXHR1cGRhdGVEYXRhKHZhbHVlKSB7XG5cdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fZGF0YTtcblx0XHR0aGlzLl9kYXRhID0gdmFsdWU7XG5cdFx0aWYgKHRoaXMuaW5pdCA9PT0gZmFsc2UpIHtcblx0XHRcdHRoaXMuZHJhdyh0aGlzLmVsZW1lbnQpO1xuXHRcdFx0dGhpcy5pbml0ID0gdHJ1ZTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gdGhpcy51cGRhdGVEYXRhKCk7XG5cdFx0XHQvLyBOT1QgSU1QTEVNRU5URURcblx0XHRcdGNvbnNvbGUubG9nKFwiVVBEQVRJTkcgREFUQSBOT1QgWUVUIElNUExFTUVOVEVEXCIpO1xuXHRcdH1cblx0XHQvLyBjb25zb2xlLmxvZyh0eXBlb2YgdXBkYXRlRGF0YSk7XG5cdFx0Ly8gaWYgKHR5cGVvZiB1cGRhdGVEYXRhID09PSAnZnVuY3Rpb24nKSB1cGRhdGVEYXRhKCk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH07XG5cblx0ZHJhdyhzZWxlY3Rpb24pIHtcblx0XHR2YXIgb2JqID0gdGhpcztcblx0XHR2YXIgd2lkdGggPSB0aGlzLndpZHRoO1xuXHRcdHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDtcblx0XHR2YXIgZ3JhcGggPSB0aGlzLl9kYXRhO1xuXHRcdHZhciBtYW55Qm9keSA9IHRoaXMubWFueUJvZHk7XG5cdFx0dmFyIGNvbG9yID0gdGhpcy5jb2xvcjtcblx0XHR2YXIgZ2V0TGlua0lkID0gdGhpcy5nZXRMaW5rSWQ7XG5cdFx0dmFyIHNpemVGaWVsZCA9IHRoaXMuc2l6ZUZpZWxkO1xuXHRcdHZhciBjb2xvckZpZWxkID0gdGhpcy5jb2xvckZpZWxkO1xuXHRcdHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbEl0ZW0gPSB0aGlzO1xuXG5cdFx0XHR2YXIgc3ZnID0gZDMuc2VsZWN0KHNlbEl0ZW0pLmFwcGVuZChcInN2Z1wiKS5hdHRyKFwid2lkdGhcIiwgd2lkdGgpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcblx0XHRcdGNvbnNvbGUubG9nKGdyYXBoKTtcblxuXHRcdFx0ZnVuY3Rpb24gZHJhZ3N0YXJ0ZWQoZCkge1xuXHRcdFx0XHRpZiAoIWQzLmV2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwLjMpLnJlc3RhcnQoKTtcblx0XHRcdFx0Y29uc29sZS5sb2coZDNldmVudCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGQzLmV2ZW50KTtcblx0XHRcdFx0ZC5meCA9IGQueDtcblx0XHRcdFx0ZC5meSA9IGQueTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZHJhZ2dlZChkKSB7XG5cdFx0XHRcdGQuZnggPSBkMy5ldmVudC54O1xuXHRcdFx0XHRkLmZ5ID0gZDMuZXZlbnQueTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZHJhZ2VuZGVkKGQpIHtcblx0XHRcdFx0aWYgKCFkMy5ldmVudC5hY3RpdmUpIHNpbXVsYXRpb24uYWxwaGFUYXJnZXQoMCk7XG5cdFx0XHRcdGQuZnggPSBudWxsO1xuXHRcdFx0XHRkLmZ5ID0gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZW50ZXJOb2Rlcyhub2RlLCB0ID0gbnVsbCkge1xuXHRcdFx0XHQvLyBwYXNzIGluIHRoZSBzZWxlY3Rpb24gZm9yIGVudGVyaW5nIG5vZGVzXG5cblx0XHRcdFx0dmFyIGRlZmF1bHRDb2xvciA9IGNvbG9yKDApO1xuXG5cdFx0XHRcdHNpemVTY2FsZS5kb21haW4oZDMuZXh0ZW50KGdyYXBoLm5vZGVzLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0aWYgKGQuaGFzT3duUHJvcGVydHkoc2l6ZUZpZWxkKSkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRbc2l6ZUZpZWxkXTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFs1LDVdXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSk7XG5cblxuXHRcdFx0XHR2YXIgbm9kZUVudGVyID0gbm9kZS5lbnRlcigpLmFwcGVuZChcImdcIilcblx0XHRcdFx0Ly8gLmF0dHIoXCJyXCIsIDUpXG5cdFx0XHRcdFx0LmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVcIilcblx0XHRcdFx0XHQvLyAuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0Ly8gXHR2YXIgdHggPSAod2lkdGgvMikgKyBkLng7XG5cdFx0XHRcdFx0Ly8gXHR2YXIgdHkgPSAoaGVpZ2h0LzIpICsgZC55O1xuXHRcdFx0XHRcdC8vIFx0cmV0dXJuIFwidHJhbnNsYXRlKFwiICsgdHggKyBcIixcIiArIHR5ICsgXCIpXCI7XG5cdFx0XHRcdFx0Ly8gfSlcblx0XHRcdFx0XHQuY2FsbChkMy5kcmFnKClcblx0XHRcdFx0XHRcdC5vbihcInN0YXJ0XCIsIGRyYWdzdGFydGVkKVxuXHRcdFx0XHRcdFx0Lm9uKFwiZHJhZ1wiLCBkcmFnZ2VkKVxuXHRcdFx0XHRcdFx0Lm9uKFwiZW5kXCIsIGRyYWdlbmRlZCkpO1xuXG5cblxuXHRcdFx0XHRub2RlID0gbm9kZS5tZXJnZShub2RlRW50ZXIpXG5cdFx0XHRcdFx0LmF0dHIoXCJjeFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnggPSAod2lkdGgvMikgKyBkLng7IH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJjeVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnkgPSAoaGVpZ2h0LzIpICsgZC55OyB9KVxuXHRcdFx0XHRcdC5lYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRcdGlmIChkLmhhc093blByb3BlcnR5KHNpemVGaWVsZCkpIHtcblx0XHRcdFx0XHRcdFx0ZC5yYWRpdXMgPSBzaXplU2NhbGUoZFtzaXplRmllbGRdKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGQucmFkaXVzID0gNTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0aWYgKGQuaGFzT3duUHJvcGVydHkoY29sb3JGaWVsZCkpIHtcblx0XHRcdFx0XHRcdFx0ZC5jb2xvciA9IGNvbG9yKGRbY29sb3JGaWVsZF0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZC5jb2xvciA9IGRlZmF1bHRDb2xvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR2YXIgbm9kZUNpcmNsZSA9IG5vZGVFbnRlclxuXHRcdFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjsgfSlcblx0XHRcdFx0XHQuYXBwZW5kKFwiY2lyY2xlXCIpXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdFx0XHQvLyAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55OyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmNvbG9yOyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwiclwiLCAwKTtcblxuXHRcdFx0XHRpZiAodCAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdC8vIG5vZGVFbnRlci5lYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHQvLyBcdGQueCA9IHdpZHRoLzI7XG5cdFx0XHRcdFx0Ly8gXHRkLnkgPSBoZWlnaHQvMjtcblx0XHRcdFx0XHQvLyB9KTtcblx0XHRcdFx0XHRub2RlXG5cdFx0XHRcdFx0XHQuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLnRyYW5zaXRpb24odClcblx0XHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkLnJhZGl1cztcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY29sb3Jfb3JpZyA9IGNvbG9yKGQuY2xfdG9wKTsgfSk7XG5cdFx0XHRcdFx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvcjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0bm9kZS5zZWxlY3RBbGwoXCJjaXJjbGVcIilcblx0XHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkLnJhZGl1cztcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY29sb3Jfb3JpZyA9IGNvbG9yKGQuY2xfdG9wKTsgfSk7XG5cdFx0XHRcdFx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvcjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGVudGVyTGlua3MobGluaywgdCA9IG51bGwpIHtcblx0XHRcdFx0Ly8gcGFzcyBpbiB0aGUgc2VsZWN0aW9uIGZvciBlbnRlcmluZyBsaW5rc1xuXHRcdFx0XHRcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBsaW5rRW50ZXIgPSBsaW5rLmVudGVyKCkuYXBwZW5kKFwibGluZVwiKVxuXHRcdFx0XHRcdC5hdHRyKFwieDFcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5zb3VyY2UueDsgfSlcblx0XHRcdFx0XHQuYXR0cihcInkxXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc291cmNlLnk7IH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJ4MlwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC54OyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwieTJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQueTsgfSlcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIFwibGlua1wiKTtcblx0XHRcdFx0bGluayA9IGxpbmsubWVyZ2UobGlua0VudGVyKTtcblx0XHRcdFx0bGlua1xuXHRcdFx0XHQgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIE1hdGguc3FydChkLndlaWdodCk7IH0pO1xuXG5cdFx0XHRcdGlmICh0ICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0bGlua0VudGVyXG5cdFx0XHRcdFx0XHQvLyAuc3R5bGUoXCJvcGFjaXR5XCIsIDApXG5cdFx0XHRcdFx0XHQuc3R5bGUoXCJzdHJva2VcIiwgXCJncmVlblwiKVxuXHRcdFx0XHRcdC8vIGxpbmtFbnRlci50cmFuc2l0aW9uKHQpXG5cdFx0XHRcdFx0Ly8gXHQuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbGluaztcblx0XHRcdH1cblxuXG5cdFx0XHRncmFwaC5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0ZC5pZCA9IGQuaWQudG9TdHJpbmcoKTtcblx0XHRcdH0pO1xuXHRcdFx0Z3JhcGgubGlua3MuZm9yRWFjaChmdW5jdGlvbihkKSB7XG5cdFx0XHRcdGQuc291cmNlID0gZC5zb3VyY2UudG9TdHJpbmcoKTtcblx0XHRcdFx0ZC50YXJnZXQgPSBkLnRhcmdldC50b1N0cmluZygpO1xuXHRcdFx0XHRkLmlkID0gZ2V0TGlua0lkKGQsIGdyYXBoLmRpcmVjdGVkKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR2YXIgc2ltdWxhdGlvbiA9IGQzLmZvcmNlU2ltdWxhdGlvbigpXG5cdFx0XHRcdC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKCkuaWQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZDsgfSkpXG5cdFx0XHRcdC8vIC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKCkpXG5cdFx0XHRcdC5mb3JjZShcImNoYXJnZVwiLCBtYW55Qm9keSlcblx0XHRcdFx0LmZvcmNlKFwiY2VudGVyXCIsIGQzLmZvcmNlQ2VudGVyKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMikpO1xuXG5cdFx0ICBzaW11bGF0aW9uXG5cdFx0XHQgIC5ub2RlcyhncmFwaC5ub2Rlcylcblx0XHRcdCAgLm9uKFwidGlja1wiLCB0aWNrZWQpO1xuXG5cdFx0ICBzaW11bGF0aW9uLmZvcmNlKFwibGlua1wiKVxuXHRcdFx0ICAubGlua3MoZ3JhcGgubGlua3MpO1xuXG5cdFx0ICBvYmouc2ltdWxhdGlvbiA9IHNpbXVsYXRpb247XG5cblx0XHRcdHZhciBzaXplU2NhbGUgPSBkMy5zY2FsZUxpbmVhcigpXG5cdFx0XHRcdC5yYW5nZShbNCwgMTJdKTtcblxuXG5cdFx0XHR2YXIgZyA9IHN2Zy5hcHBlbmQoXCJnXCIpO1xuXG5cdFx0ICB2YXIgbGluayA9IGcuYXBwZW5kKFwiZ1wiKVxuXHRcdFx0ICAuYXR0cihcImNsYXNzXCIsIFwibGlua3NcIilcblx0XHRcdC8vIC5zZWxlY3RBbGwoXCJsaW5lXCIpXG5cdFx0XHQuc2VsZWN0QWxsKFwiLmxpbmtcIik7XG5cblx0XHRcdGxpbmsgPSBsaW5rLmRhdGEoZ3JhcGgubGlua3MsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0cmV0dXJuIGQuaWQ7XG5cdFx0XHR9KTtcblxuXHRcdCAgdmFyIG5vZGUgPSBnLmFwcGVuZChcImdcIilcblx0XHRcdCAgLmF0dHIoXCJjbGFzc1wiLCBcIm5vZGVzXCIpXG5cdFx0XHQuc2VsZWN0QWxsKFwiLm5vZGVcIik7XG5cblx0XHRcdG5vZGUgPSBub2RlLmRhdGEoZ3JhcGgubm9kZXMsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuaWQ7IH0pO1xuXG5cdFx0XHRub2RlID0gZW50ZXJOb2Rlcyhub2RlKTtcblx0XHRcdGxpbmsgPSBlbnRlckxpbmtzKGxpbmspO1xuXG5cblx0XHRcdC8vIG5vZGVDaXJjbGUub24oJ2NsaWNrJywgZnVuY3Rpb24oZCkge1xuXHRcdFx0Ly8gXHRub2RlLmNsYXNzZWQoJ2ZvY3VzJywgZmFsc2UpO1xuXHRcdFx0Ly8gXHRub2RlLnNlbGVjdEFsbChcInRleHRcIikuc3R5bGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblx0XHRcdC8vIFx0bm9kZUNpcmNsZS5hdHRyKFwiZmlsbFwiLCBcImJsYWNrXCIpXG5cdFx0XHQvLyBcdFx0LnN0eWxlKFwib3BhY2l0eVwiLCAuMSk7XG5cdFx0XHQvLyBcdGxpbmsuc3R5bGUoXCJvcGFjaXR5XCIsIC4xKTtcblx0XHRcdC8vIFx0dmFyIGNvbXBvbmVudF9pZHMgPSBncmFwaC5ncmFwaC5jb25uZWN0ZWRfY29tcG9uZW50c1tkLmNvbXBvbmVudF07XG5cdFx0XHQvLyBcdHZhciBjb21wb25lbnQgPSBub2RlLmZpbHRlcihmdW5jdGlvbihkKSB7cmV0dXJuIGNvbXBvbmVudF9pZHMuaW5jbHVkZXMoZC5pZCk7IH0pO1xuXHRcdFx0Ly8gXHR2YXIgY29tcG9uZW50TGluayA9IGxpbmsuZmlsdGVyKGZ1bmN0aW9uKGQpIHtyZXR1cm4gY29tcG9uZW50X2lkcy5pbmNsdWRlcyhkLnNvdXJjZS5pZCk7fSlcblx0XHRcdC8vIFx0dmFyIGNvbXBvbmVudENvbG9yID0gZDMuc2NhbGVPcmRpbmFsKGQzLnNjaGVtZUNhdGVnb3J5MTApO1xuXHRcdFx0Ly8gXHRjb21wb25lbnQuY2xhc3NlZChcImZvY3VzXCIsIHRydWUpO1xuXHRcdFx0Ly8gXHRjb21wb25lbnQuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGNvbXBvbmVudENvbG9yKGQuY2xfYm90dG9tKTsgfSlcblx0XHRcdC8vIFx0XHQuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuXHRcdFx0Ly8gXHRjb21wb25lbnQuc2VsZWN0QWxsKFwidGV4dFwiKS5zdHlsZShcImRpc3BsYXlcIiwgXCJcIik7ICAvLyBzaG93IHRoZXNlIGxhYmVsc1xuXHRcdFx0Ly8gXHRjb21wb25lbnRMaW5rLnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcblx0XHRcdC8vIFx0XG5cdFx0XHQvLyBcdCQoICcjbm9kZWxhYi1mb3JtJyApLmNzcyggJ3Zpc2liaWxpdHknICwgJ3Zpc2libGUnICk7XG5cdFx0XHQvLyBcdGFwcGx5UmFkaW9TZWxlY3Rpb24oKTtcblx0XHRcdC8vXG5cdFx0XHQvLyBcdGQzLmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0Ly9cblx0XHRcdC8vIH0pO1xuXG5cblxuXHRcdCAgZnVuY3Rpb24gdGlja2VkKCkge1xuXHRcdFx0Ly8gbm9kZVxuXHRcdFx0Ly8gICAgIC5hdHRyKFwiY3hcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC54OyB9KVxuXHRcdFx0Ly8gICAgIC5hdHRyKFwiY3lcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55OyB9KTtcblx0XHRcdC8vIGFkZCBib3VuZGluZyBib3hcblx0XHRcdC8vICAgaHR0cHM6Ly9ibC5vY2tzLm9yZy9tYm9zdG9jay8xMTI5NDkyXG5cdFx0XHRub2RlXG5cdFx0XHRcdC5hdHRyKFwiY3hcIiwgZnVuY3Rpb24oZCkgeyBcblx0XHRcdFx0XHRkLnggPSBNYXRoLm1heChkLnJhZGl1cywgTWF0aC5taW4od2lkdGggLSBkLnJhZGl1cywgZC54KSk7XG5cdFx0XHRcdFx0cmV0dXJuIGQueDsgfSlcblx0XHRcdFx0LmF0dHIoXCJjeVwiLCBmdW5jdGlvbihkKSB7IFxuXHRcdFx0XHRcdGQueSA9IE1hdGgubWF4KGQucmFkaXVzLCBNYXRoLm1pbih3aWR0aCAtIGQucmFkaXVzLCBkLnkpKTtcblx0XHRcdFx0XHRyZXR1cm4gZC55OyB9KVxuXHRcdFx0XHQuYXR0cihcInRyYW5zZm9ybVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBcInRyYW5zbGF0ZShcIiArIGQueCArIFwiLFwiICsgZC55ICsgXCIpXCI7IH0pO1xuXG5cdFx0XHRsaW5rXG5cdFx0XHRcdC8vIC5zZWxlY3RBbGwoXCJsaW5lXCIpXG5cdFx0XHRcdC5hdHRyKFwieDFcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5zb3VyY2UueDsgfSlcblx0XHRcdFx0LmF0dHIoXCJ5MVwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnNvdXJjZS55OyB9KVxuXHRcdFx0XHQuYXR0cihcIngyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudGFyZ2V0Lng7IH0pXG5cdFx0XHRcdC5hdHRyKFwieTJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQueTsgfSk7XG5cdFx0ICB9XG5cblx0XHRcdGZ1bmN0aW9uIHJlc2V0X2xheW91dCgpIHtcblx0XHRcdFx0bm9kZS5jbGFzc2VkKFwiZm9jdXNcIiwgZmFsc2UpO1xuXHRcdFx0XHRub2RlLnNlbGVjdEFsbChcInRleHRcIikuc3R5bGUoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcblx0XHRcdFx0Ly8gbm9kZUNpcmNsZS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmNvbG9yX29yaWc7IH0pXG5cdFx0XHRcdC8vIFx0LnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcblx0XHRcdFx0bGluay5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG5cdFx0XHR9XG5cdFx0XHRzdmcub24oXCJjbGlja1wiLCByZXNldF9sYXlvdXQpO1xuXG5cblxuXG5cdFx0fSk7XG5cdHJldHVybiB0aGlzO1xuXHR9XG5cbn1cblxuZXhwb3J0IGRlZmF1bHQgZDNGb3JjZU5vZGVMaW5rO1xuIiwiaW1wb3J0IGQzRm9yY2VOb2RlTGluayBmcm9tICcuL3Zpcy5qcyc7XG5leHBvcnQgeyBkM0ZvcmNlTm9kZUxpbmsgfTtcblxuIl0sInNvdXJjZVJvb3QiOiIifQ==