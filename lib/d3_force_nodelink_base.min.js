!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("d3-force"),require("d3-selection"),require("d3-scale"),require("d3-scale-chromatic"),require("d3-array"),require("d3-drag")):"function"==typeof define&&define.amd?define("d3_force_nodelink_base",["d3-force","d3-selection","d3-scale","d3-scale-chromatic","d3-array","d3-drag"],e):"object"==typeof exports?exports.d3_force_nodelink_base=e(require("d3-force"),require("d3-selection"),require("d3-scale"),require("d3-scale-chromatic"),require("d3-array"),require("d3-drag")):t.d3_force_nodelink_base=e(t.d3,t.d3,t.d3,t.d3,t.d3,t.d3)}("undefined"!=typeof self?self:this,function(t,e,r,n,o,i){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=6)}([function(e,r){e.exports=t},function(t,r){t.exports=e},function(t,e){t.exports=r},function(t,e){t.exports=n},function(t,e){t.exports=o},function(t,e){t.exports=i},function(t,e,r){"use strict";r.r(e);var n=r(1),o=r(2),i=r(3),a=r(0),c=r(4),u=r(5);const l={select:n.select,selectAll:n.selectAll,scaleOrdinal:o.scaleOrdinal,scaleLinear:o.scaleLinear,schemeCategory10:i.schemeCategory10,forceManyBody:a.forceManyBody,forceSimulation:a.forceSimulation,forceLink:a.forceLink,forceCenter:a.forceCenter,extent:c.extent,drag:u.drag};var s=class{constructor(t={}){const e={el:null,data:null,width:960,color:l.scaleOrdinal(l.schemeCategory10),forceStrength:-2};Object.assign(this,e,t),this._data=this.data,this.data=this.updateData,void 0===this.height&&(this.height=.625*this.width),this.manyBody=l.forceManyBody().strength(this.forceStrength),this.init=!1,console.log(this._data),null!==this.el&&null!==this._data&&(this.draw(this.el),this.init=!0)}getLinkId(t,e=!1){var r=[t.source.toString(),t.target.toString()];return!0===e&&r.sort(),r[0]+"-&-"+r[1]}updateData(t){return arguments.length?(this._data=t,!1===this.init?(this.draw(this.el),this.init=!0):console.log("UPDATING DATA NOT YET IMPLEMENTED"),this):this._data}draw(t){var e=this,r=this.width,n=this.height,o=this._data,i=this.manyBody,a=this.color,c=this.getLinkId;return t.each(function(){var t=l.select(this).append("svg").attr("width",r).attr("height",n);function u(t){d3event.active||f.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y}function s(t){t.fx=d3event.x,t.fy=d3event.y}function d(t){d3event.active||f.alphaTarget(0),t.fx=null,t.fy=null}console.log(o),o.nodes.forEach(function(t){t.id=t.id.toString()}),o.links.forEach(function(t){t.source=t.source.toString(),t.target=t.target.toString(),t.id=c(t,o.directed)});var f=l.forceSimulation().force("link",l.forceLink().id(function(t){return t.id})).force("charge",i).force("center",l.forceCenter(r/2,n/2));console.log("ddd"),f.nodes(o.nodes).on("tick",function(){p.attr("cx",function(t){return t.x=Math.max(t.radius,Math.min(r-t.radius,t.x)),t.x}).attr("cy",function(t){return t.y=Math.max(t.radius,Math.min(r-t.radius,t.y)),t.y}).attr("transform",function(t){return"translate("+t.x+","+t.y+")"}),g.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y})}),f.force("link").links(o.links),e.simulation=f;var h=l.scaleLinear().range([4,12]),y=t.append("g"),g=y.append("g").attr("class","links").selectAll(".link");g=g.data(o.links,function(t){return t.id});var p=y.append("g").attr("class","nodes").selectAll(".node");p=function(t,e=null){var i=a(0);h.domain(l.extent(o.nodes,function(t){return t.hasOwnProperty("flow")?t.flow:[5,5]}));var c=t.enter().append("g").attr("class","node").call(l.drag().on("start",u).on("drag",s).on("end",d));return t=t.merge(c).attr("cx",function(t){return t.x=r/2+t.x}).attr("cy",function(t){return t.y=n/2+t.y}).each(function(t){t.hasOwnProperty("flow")?t.radius=h(t.flow):t.radius=5,t.hasOwnProperty("cl_top")?t.color=a(t.cl_top):t.color=i}),c.attr("transform",function(t){return"translate("+t.x+","+t.y+")"}).append("circle").attr("fill",function(t){return t.color}).attr("r",0),null!==e?t.selectAll("circle").transition(e).attr("r",function(t){return t.radius}).attr("fill",function(t){return t.color}):t.selectAll("circle").attr("r",function(t){return t.radius}).attr("fill",function(t){return t.color}),t}(p=p.data(o.nodes,function(t){return t.id})),g=function(t,e=null){var r=t.enter().append("line").attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}).attr("class","link");return(t=t.merge(r)).attr("stroke-width",function(t){return Math.sqrt(t.weight)}),null!==e&&r.style("stroke","green"),t}(g),t.on("click",function(){p.classed("focus",!1),p.selectAll("text").style("display","none"),g.style("opacity",1)})}),this}};r.d(e,"d3ForceNodeLink",function(){return s})}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9kM19mb3JjZV9ub2RlbGlua19iYXNlL3dlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbiIsIndlYnBhY2s6Ly9kM19mb3JjZV9ub2RlbGlua19iYXNlL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL2QzX2ZvcmNlX25vZGVsaW5rX2Jhc2UvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcImQzLWZvcmNlXCIsXCJjb21tb25qczJcIjpcImQzLWZvcmNlXCIsXCJhbWRcIjpcImQzLWZvcmNlXCIsXCJyb290XCI6XCJkM1wifSIsIndlYnBhY2s6Ly9kM19mb3JjZV9ub2RlbGlua19iYXNlL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJkMy1zZWxlY3Rpb25cIixcImNvbW1vbmpzMlwiOlwiZDMtc2VsZWN0aW9uXCIsXCJhbWRcIjpcImQzLXNlbGVjdGlvblwiLFwicm9vdFwiOlwiZDNcIn0iLCJ3ZWJwYWNrOi8vZDNfZm9yY2Vfbm9kZWxpbmtfYmFzZS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwiZDMtc2NhbGVcIixcImNvbW1vbmpzMlwiOlwiZDMtc2NhbGVcIixcImFtZFwiOlwiZDMtc2NhbGVcIixcInJvb3RcIjpcImQzXCJ9Iiwid2VicGFjazovL2QzX2ZvcmNlX25vZGVsaW5rX2Jhc2UvZXh0ZXJuYWwge1wiY29tbW9uanNcIjpcImQzLXNjYWxlLWNocm9tYXRpY1wiLFwiY29tbW9uanMyXCI6XCJkMy1zY2FsZS1jaHJvbWF0aWNcIixcImFtZFwiOlwiZDMtc2NhbGUtY2hyb21hdGljXCIsXCJyb290XCI6XCJkM1wifSIsIndlYnBhY2s6Ly9kM19mb3JjZV9ub2RlbGlua19iYXNlL2V4dGVybmFsIHtcImNvbW1vbmpzXCI6XCJkMy1hcnJheVwiLFwiY29tbW9uanMyXCI6XCJkMy1hcnJheVwiLFwiYW1kXCI6XCJkMy1hcnJheVwiLFwicm9vdFwiOlwiZDNcIn0iLCJ3ZWJwYWNrOi8vZDNfZm9yY2Vfbm9kZWxpbmtfYmFzZS9leHRlcm5hbCB7XCJjb21tb25qc1wiOlwiZDMtZHJhZ1wiLFwiY29tbW9uanMyXCI6XCJkMy1kcmFnXCIsXCJhbWRcIjpcImQzLWRyYWdcIixcInJvb3RcIjpcImQzXCJ9Iiwid2VicGFjazovL2QzX2ZvcmNlX25vZGVsaW5rX2Jhc2UvLi9zcmMvdmlzLmpzIiwid2VicGFjazovL2QzX2ZvcmNlX25vZGVsaW5rX2Jhc2UvLi9zcmMvaW5kZXguanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMl9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fM19fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNV9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsImQzIiwic2VsZWN0Iiwic2VsZWN0QWxsIiwic2NhbGVPcmRpbmFsIiwic2NhbGVMaW5lYXIiLCJzY2hlbWVDYXRlZ29yeTEwIiwiZm9yY2VNYW55Qm9keSIsImZvcmNlU2ltdWxhdGlvbiIsImZvcmNlTGluayIsImZvcmNlQ2VudGVyIiwiZXh0ZW50IiwiZHJhZyIsImQzRm9yY2VOb2RlTGluayIsImNvbnN0cnVjdG9yIiwib3B0cyIsImRlZmF1bHRzIiwiZWwiLCJkYXRhIiwid2lkdGgiLCJjb2xvciIsImZvcmNlU3RyZW5ndGgiLCJhc3NpZ24iLCJfZGF0YSIsInVwZGF0ZURhdGEiLCJoZWlnaHQiLCJtYW55Qm9keSIsInN0cmVuZ3RoIiwiaW5pdCIsImNvbnNvbGUiLCJsb2ciLCJkcmF3IiwiZ2V0TGlua0lkIiwibGluayIsImRpcmVjdGVkIiwiaXRlbXMiLCJzb3VyY2UiLCJ0b1N0cmluZyIsInRhcmdldCIsInNvcnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJzZWxlY3Rpb24iLCJvYmoiLCJncmFwaCIsImVhY2giLCJzdmciLCJhcHBlbmQiLCJhdHRyIiwiZHJhZ3N0YXJ0ZWQiLCJkM2V2ZW50IiwiYWN0aXZlIiwic2ltdWxhdGlvbiIsImFscGhhVGFyZ2V0IiwicmVzdGFydCIsImZ4IiwieCIsImZ5IiwieSIsImRyYWdnZWQiLCJkcmFnZW5kZWQiLCJub2RlcyIsImZvckVhY2giLCJpZCIsImxpbmtzIiwiZm9yY2UiLCJvbiIsIm5vZGUiLCJNYXRoIiwibWF4IiwicmFkaXVzIiwibWluIiwic2l6ZVNjYWxlIiwicmFuZ2UiLCJnIiwiZGVmYXVsdENvbG9yIiwiZG9tYWluIiwiZmxvdyIsIm5vZGVFbnRlciIsImVudGVyIiwibWVyZ2UiLCJjbF90b3AiLCJ0cmFuc2l0aW9uIiwiZW50ZXJOb2RlcyIsImxpbmtFbnRlciIsInNxcnQiLCJ3ZWlnaHQiLCJzdHlsZSIsImVudGVyTGlua3MiLCJjbGFzc2VkIiwiX193ZWJwYWNrX2V4cG9ydHNfXyIsInZpcyJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBQUEsRUFBQUMsR0FDQSxpQkFBQUMsU0FBQSxpQkFBQUMsT0FDQUEsT0FBQUQsUUFBQUQsRUFBQUcsUUFBQSxZQUFBQSxRQUFBLGdCQUFBQSxRQUFBLFlBQUFBLFFBQUEsc0JBQUFBLFFBQUEsWUFBQUEsUUFB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SUFDekNSLEtBQUssS0FBTSxTQUFTekUsR0FBSyxPQUFPQSxFQUFFNkQsT0FBT3NCLElBQ3pDVixLQUFLLEtBQU0sU0FBU3pFLEdBQUssT0FBT0EsRUFBRStELE9BQU9rQixJQUN6Q1IsS0FBSyxLQUFNLFNBQVN6RSxHQUFLLE9BQU9BLEVBQUUrRCxPQUFPb0IsSUFDekNWLEtBQUssUUFBUyxRQWVoQixPQWRBZixFQUFPQSxFQUFLK0MsTUFBTUksSUFFZnBDLEtBQUssZUFBZ0IsU0FBU3pFLEdBQUssT0FBTzZGLEtBQUtpQixLQUFLOUcsRUFBRStHLFVBRS9DLE9BQU5uRyxHQUNIaUcsRUFFRUcsTUFBTSxTQUFVLFNBT1p0RCxFQW1ERHVELENBQVd2RCxHQTBEbEJhLEVBQUlvQixHQUFHLFFBUFAsV0FDQ0MsRUFBS3NCLFFBQVEsU0FBUyxHQUN0QnRCLEVBQUtoRSxVQUFVLFFBQVFvRixNQUFNLFVBQVcsUUFHeEN0RCxFQUFLc0QsTUFBTSxVQUFXLE9BUWxCaEksT0NyVVJRLEVBQUFRLEVBQUFtSCxFQUFBLG9DQUFBQyIsImZpbGUiOiJkM19mb3JjZV9ub2RlbGlua19iYXNlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiB3ZWJwYWNrVW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvbihyb290LCBmYWN0b3J5KSB7XG5cdGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlID09PSAnb2JqZWN0Jylcblx0XHRtb2R1bGUuZXhwb3J0cyA9IGZhY3RvcnkocmVxdWlyZShcImQzLWZvcmNlXCIpLCByZXF1aXJlKFwiZDMtc2VsZWN0aW9uXCIpLCByZXF1aXJlKFwiZDMtc2NhbGVcIiksIHJlcXVpcmUoXCJkMy1zY2FsZS1jaHJvbWF0aWNcIiksIHJlcXVpcmUoXCJkMy1hcnJheVwiKSwgcmVxdWlyZShcImQzLWRyYWdcIikpO1xuXHRlbHNlIGlmKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZClcblx0XHRkZWZpbmUoXCJkM19mb3JjZV9ub2RlbGlua19iYXNlXCIsIFtcImQzLWZvcmNlXCIsIFwiZDMtc2VsZWN0aW9uXCIsIFwiZDMtc2NhbGVcIiwgXCJkMy1zY2FsZS1jaHJvbWF0aWNcIiwgXCJkMy1hcnJheVwiLCBcImQzLWRyYWdcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiZDNfZm9yY2Vfbm9kZWxpbmtfYmFzZVwiXSA9IGZhY3RvcnkocmVxdWlyZShcImQzLWZvcmNlXCIpLCByZXF1aXJlKFwiZDMtc2VsZWN0aW9uXCIpLCByZXF1aXJlKFwiZDMtc2NhbGVcIiksIHJlcXVpcmUoXCJkMy1zY2FsZS1jaHJvbWF0aWNcIiksIHJlcXVpcmUoXCJkMy1hcnJheVwiKSwgcmVxdWlyZShcImQzLWRyYWdcIikpO1xuXHRlbHNlXG5cdFx0cm9vdFtcImQzX2ZvcmNlX25vZGVsaW5rX2Jhc2VcIl0gPSBmYWN0b3J5KHJvb3RbXCJkM1wiXSwgcm9vdFtcImQzXCJdLCByb290W1wiZDNcIl0sIHJvb3RbXCJkM1wiXSwgcm9vdFtcImQzXCJdLCByb290W1wiZDNcIl0pO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18yX18sIF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzNfXywgX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fNF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX181X18pIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzJfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzNfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzRfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzVfXzsiLCIvLyBkM0ZvcmNlTm9kZUxpbmtcblxuLy8gaW1wb3J0ICogYXMgZDMgZnJvbSAnZDMnO1xuLy8gaW1wb3J0IGpRdWVyeSBmcm9tICdqcXVlcnknO1xuLy8gY29uc3QgJCA9IGpRdWVyeTtcblxuLy8gaW1wb3J0IHtzZWxlY3QsIHNlbGVjdEFsbCwgZXZlbnQgYXMgZDNldmVudH0gZnJvbSAnZDMtc2VsZWN0aW9uJztcbmltcG9ydCB7c2VsZWN0LCBzZWxlY3RBbGx9IGZyb20gJ2QzLXNlbGVjdGlvbic7XG5pbXBvcnQge3NjYWxlT3JkaW5hbCwgc2NhbGVMaW5lYXJ9IGZyb20gJ2QzLXNjYWxlJztcbmltcG9ydCB7c2NoZW1lQ2F0ZWdvcnkxMH0gZnJvbSAnZDMtc2NhbGUtY2hyb21hdGljJztcbmltcG9ydCB7Zm9yY2VNYW55Qm9keSwgZm9yY2VTaW11bGF0aW9uLCBmb3JjZUxpbmssIGZvcmNlQ2VudGVyfSBmcm9tICdkMy1mb3JjZSc7XG5pbXBvcnQge2V4dGVudH0gZnJvbSAnZDMtYXJyYXknO1xuaW1wb3J0IHtkcmFnfSBmcm9tICdkMy1kcmFnJztcblxuY29uc3QgZDMgPSB7c2VsZWN0LCBzZWxlY3RBbGwsIHNjYWxlT3JkaW5hbCwgc2NhbGVMaW5lYXIsIHNjaGVtZUNhdGVnb3J5MTAsIGZvcmNlTWFueUJvZHksIGZvcmNlU2ltdWxhdGlvbiwgZm9yY2VMaW5rLCBmb3JjZUNlbnRlciwgZXh0ZW50LCBkcmFnfVxuLy8gY2FuJ3QgZmlndXJlIG91dCBob3cgdG8gdXNlIGQzLmV2ZW50LCBzbyByZXBsYWNlIGl0IHdpdGggZDNldmVudCBpbnN0ZWFkXG5cblxuY2xhc3MgZDNGb3JjZU5vZGVMaW5rIHtcblx0Y29uc3RydWN0b3Iob3B0cyA9IHt9KSB7XG5cdFx0Y29uc3QgZGVmYXVsdHMgPSB7XG5cdFx0XHRlbDogbnVsbCxcblx0XHRcdGRhdGE6IG51bGwsXG5cdFx0XHR3aWR0aDogOTYwLFxuXHRcdFx0Y29sb3I6IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKSxcblx0XHRcdGZvcmNlU3RyZW5ndGg6IC0yLFxuXHRcdH07XG5cdFx0T2JqZWN0LmFzc2lnbih0aGlzLCBkZWZhdWx0cywgb3B0cyk7ICAvLyBvcHRzIHdpbGwgb3ZlcndyaXRlIGRlZmF1bHRzXG5cdFx0dGhpcy5fZGF0YSA9IHRoaXMuZGF0YTtcblx0XHR0aGlzLmRhdGEgPSB0aGlzLnVwZGF0ZURhdGE7XG5cdFx0aWYgKHR5cGVvZiB0aGlzLmhlaWdodCA9PT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdHRoaXMuaGVpZ2h0ID0gLjYyNSAqIHRoaXMud2lkdGg7XG5cdFx0fVxuXHRcdHRoaXMubWFueUJvZHkgPSBkMy5mb3JjZU1hbnlCb2R5KClcblx0XHRcdFx0XHRcdFx0LnN0cmVuZ3RoKHRoaXMuZm9yY2VTdHJlbmd0aCk7XG5cdFx0dGhpcy5pbml0ID0gZmFsc2U7XG5cdFx0Y29uc29sZS5sb2codGhpcy5fZGF0YSk7XG5cdFx0aWYgKHRoaXMuZWwgIT09IG51bGwgJiYgdGhpcy5fZGF0YSAhPT0gbnVsbCkge1xuXHRcdFx0dGhpcy5kcmF3KHRoaXMuZWwpO1xuXHRcdFx0dGhpcy5pbml0ID0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHRnZXRMaW5rSWQobGluaywgZGlyZWN0ZWQgPSBmYWxzZSkge1xuXHRcdC8vIGxpbmsgSUQgd2lsbCBiZSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGUgc291cmNlIElEIGFuZCB0YXJnZXQgSUQsIHNlcGFyYXRlZCBieSBcIi0mLVwiXG5cdFx0Ly8gSWYgdGhlIGdyYXBoIGlzIHVuZGlyZWN0ZWQsIHRoZSBJRHMgd2lsbCBiZSBzb3J0ZWQgQUxQSEFCRVRJQ0FMTFkgdXNpbmcgdGhlIHN0cmluZyB2YWx1ZXMgb2YgdGhlIElEXG5cdFx0dmFyIHNvdXJjZSA9IGxpbmsuc291cmNlLnRvU3RyaW5nKCk7XG5cdFx0dmFyIHRhcmdldCA9IGxpbmsudGFyZ2V0LnRvU3RyaW5nKCk7XG5cdFx0dmFyIGl0ZW1zID0gW3NvdXJjZSwgdGFyZ2V0XTtcblx0XHR2YXIgc2VwID0gXCItJi1cIjtcblx0XHRpZiAoZGlyZWN0ZWQgPT09IHRydWUpIHtcblx0XHRcdGl0ZW1zLnNvcnQoKTtcblx0XHR9XG5cdFx0cmV0dXJuIGl0ZW1zWzBdICsgc2VwICsgaXRlbXNbMV07XG5cdH1cblxuXHR1cGRhdGVEYXRhKHZhbHVlKSB7XG5cdFx0aWYgKCFhcmd1bWVudHMubGVuZ3RoKSByZXR1cm4gdGhpcy5fZGF0YTtcblx0XHR0aGlzLl9kYXRhID0gdmFsdWU7XG5cdFx0aWYgKHRoaXMuaW5pdCA9PT0gZmFsc2UpIHtcblx0XHRcdHRoaXMuZHJhdyh0aGlzLmVsKTtcblx0XHRcdHRoaXMuaW5pdCA9IHRydWU7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIHRoaXMudXBkYXRlRGF0YSgpO1xuXHRcdFx0Ly8gTk9UIElNUExFTUVOVEVEXG5cdFx0XHRjb25zb2xlLmxvZyhcIlVQREFUSU5HIERBVEEgTk9UIFlFVCBJTVBMRU1FTlRFRFwiKTtcblx0XHR9XG5cdFx0Ly8gY29uc29sZS5sb2codHlwZW9mIHVwZGF0ZURhdGEpO1xuXHRcdC8vIGlmICh0eXBlb2YgdXBkYXRlRGF0YSA9PT0gJ2Z1bmN0aW9uJykgdXBkYXRlRGF0YSgpO1xuXHRcdHJldHVybiB0aGlzO1xuXHR9O1xuXG5cdGRyYXcoc2VsZWN0aW9uKSB7XG5cdFx0dmFyIG9iaiA9IHRoaXM7XG5cdFx0dmFyIHdpZHRoID0gdGhpcy53aWR0aDtcblx0XHR2YXIgaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdFx0dmFyIGdyYXBoID0gdGhpcy5fZGF0YTtcblx0XHR2YXIgbWFueUJvZHkgPSB0aGlzLm1hbnlCb2R5O1xuXHRcdHZhciBjb2xvciA9IHRoaXMuY29sb3I7XG5cdFx0dmFyIGdldExpbmtJZCA9IHRoaXMuZ2V0TGlua0lkO1xuXHRcdHNlbGVjdGlvbi5lYWNoKGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbEl0ZW0gPSB0aGlzO1xuXG5cdFx0XHR2YXIgc3ZnID0gZDMuc2VsZWN0KHNlbEl0ZW0pLmFwcGVuZChcInN2Z1wiKS5hdHRyKFwid2lkdGhcIiwgd2lkdGgpLmF0dHIoXCJoZWlnaHRcIiwgaGVpZ2h0KTtcblx0XHRcdGNvbnNvbGUubG9nKGdyYXBoKTtcblxuXHRcdFx0ZnVuY3Rpb24gZHJhZ3N0YXJ0ZWQoZCkge1xuXHRcdFx0XHRpZiAoIWQzZXZlbnQuYWN0aXZlKSBzaW11bGF0aW9uLmFscGhhVGFyZ2V0KDAuMykucmVzdGFydCgpO1xuXHRcdFx0XHRkLmZ4ID0gZC54O1xuXHRcdFx0XHRkLmZ5ID0gZC55O1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBkcmFnZ2VkKGQpIHtcblx0XHRcdFx0ZC5meCA9IGQzZXZlbnQueDtcblx0XHRcdFx0ZC5meSA9IGQzZXZlbnQueTtcblx0XHRcdH1cblxuXHRcdFx0ZnVuY3Rpb24gZHJhZ2VuZGVkKGQpIHtcblx0XHRcdFx0aWYgKCFkM2V2ZW50LmFjdGl2ZSkgc2ltdWxhdGlvbi5hbHBoYVRhcmdldCgwKTtcblx0XHRcdFx0ZC5meCA9IG51bGw7XG5cdFx0XHRcdGQuZnkgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRmdW5jdGlvbiBlbnRlck5vZGVzKG5vZGUsIHQgPSBudWxsKSB7XG5cdFx0XHRcdC8vIHBhc3MgaW4gdGhlIHNlbGVjdGlvbiBmb3IgZW50ZXJpbmcgbm9kZXNcblxuXHRcdFx0XHR2YXIgZGVmYXVsdENvbG9yID0gY29sb3IoMCk7XG5cblx0XHRcdFx0c2l6ZVNjYWxlLmRvbWFpbihkMy5leHRlbnQoZ3JhcGgubm9kZXMsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHRpZiAoZC5oYXNPd25Qcm9wZXJ0eSgnZmxvdycpKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZC5mbG93O1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gWzUsNV1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pKTtcblxuXG5cdFx0XHRcdHZhciBub2RlRW50ZXIgPSBub2RlLmVudGVyKCkuYXBwZW5kKFwiZ1wiKVxuXHRcdFx0XHQvLyAuYXR0cihcInJcIiwgNSlcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIFwibm9kZVwiKVxuXHRcdFx0XHRcdC8vIC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHQvLyBcdHZhciB0eCA9ICh3aWR0aC8yKSArIGQueDtcblx0XHRcdFx0XHQvLyBcdHZhciB0eSA9IChoZWlnaHQvMikgKyBkLnk7XG5cdFx0XHRcdFx0Ly8gXHRyZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyB0eCArIFwiLFwiICsgdHkgKyBcIilcIjtcblx0XHRcdFx0XHQvLyB9KVxuXHRcdFx0XHRcdC5jYWxsKGQzLmRyYWcoKVxuXHRcdFx0XHRcdFx0Lm9uKFwic3RhcnRcIiwgZHJhZ3N0YXJ0ZWQpXG5cdFx0XHRcdFx0XHQub24oXCJkcmFnXCIsIGRyYWdnZWQpXG5cdFx0XHRcdFx0XHQub24oXCJlbmRcIiwgZHJhZ2VuZGVkKSk7XG5cblxuXG5cdFx0XHRcdG5vZGUgPSBub2RlLm1lcmdlKG5vZGVFbnRlcilcblx0XHRcdFx0XHQuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueCA9ICh3aWR0aC8yKSArIGQueDsgfSlcblx0XHRcdFx0XHQuYXR0cihcImN5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueSA9IChoZWlnaHQvMikgKyBkLnk7IH0pXG5cdFx0XHRcdFx0LmVhY2goZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0aWYgKGQuaGFzT3duUHJvcGVydHkoJ2Zsb3cnKSkge1xuXHRcdFx0XHRcdFx0XHRkLnJhZGl1cyA9IHNpemVTY2FsZShkLmZsb3cpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZC5yYWRpdXMgPSA1O1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRpZiAoZC5oYXNPd25Qcm9wZXJ0eShcImNsX3RvcFwiKSkge1xuXHRcdFx0XHRcdFx0XHRkLmNvbG9yID0gY29sb3IoZC5jbF90b3ApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0ZC5jb2xvciA9IGRlZmF1bHRDb2xvcjtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHR2YXIgbm9kZUNpcmNsZSA9IG5vZGVFbnRlclxuXHRcdFx0XHRcdC5hdHRyKFwidHJhbnNmb3JtXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIFwidHJhbnNsYXRlKFwiICsgZC54ICsgXCIsXCIgKyBkLnkgKyBcIilcIjsgfSlcblx0XHRcdFx0XHQuYXBwZW5kKFwiY2lyY2xlXCIpXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJ4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdFx0XHQvLyAuYXR0cihcInlcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC55OyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmNvbG9yOyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwiclwiLCAwKTtcblxuXHRcdFx0XHRpZiAodCAhPT0gbnVsbCkge1xuXHRcdFx0XHRcdC8vIG5vZGVFbnRlci5lYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0XHQvLyBcdGQueCA9IHdpZHRoLzI7XG5cdFx0XHRcdFx0Ly8gXHRkLnkgPSBoZWlnaHQvMjtcblx0XHRcdFx0XHQvLyB9KTtcblx0XHRcdFx0XHRub2RlXG5cdFx0XHRcdFx0XHQuc2VsZWN0QWxsKFwiY2lyY2xlXCIpLnRyYW5zaXRpb24odClcblx0XHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkLnJhZGl1cztcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY29sb3Jfb3JpZyA9IGNvbG9yKGQuY2xfdG9wKTsgfSk7XG5cdFx0XHRcdFx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvcjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0bm9kZS5zZWxlY3RBbGwoXCJjaXJjbGVcIilcblx0XHRcdFx0XHRcdC5hdHRyKFwiclwiLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBkLnJhZGl1cztcblx0XHRcdFx0XHRcdH0pXG5cdFx0XHRcdFx0Ly8gLmF0dHIoXCJmaWxsXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuY29sb3Jfb3JpZyA9IGNvbG9yKGQuY2xfdG9wKTsgfSk7XG5cdFx0XHRcdFx0XHQuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZC5jb2xvcjtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdGZ1bmN0aW9uIGVudGVyTGlua3MobGluaywgdCA9IG51bGwpIHtcblx0XHRcdFx0Ly8gcGFzcyBpbiB0aGUgc2VsZWN0aW9uIGZvciBlbnRlcmluZyBsaW5rc1xuXHRcdFx0XHRcblx0XHRcdFx0XG5cdFx0XHRcdHZhciBsaW5rRW50ZXIgPSBsaW5rLmVudGVyKCkuYXBwZW5kKFwibGluZVwiKVxuXHRcdFx0XHRcdC5hdHRyKFwieDFcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5zb3VyY2UueDsgfSlcblx0XHRcdFx0XHQuYXR0cihcInkxXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc291cmNlLnk7IH0pXG5cdFx0XHRcdFx0LmF0dHIoXCJ4MlwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC54OyB9KVxuXHRcdFx0XHRcdC5hdHRyKFwieTJcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC50YXJnZXQueTsgfSlcblx0XHRcdFx0XHQuYXR0cihcImNsYXNzXCIsIFwibGlua1wiKTtcblx0XHRcdFx0bGluayA9IGxpbmsubWVyZ2UobGlua0VudGVyKTtcblx0XHRcdFx0bGlua1xuXHRcdFx0XHQgIC5hdHRyKFwic3Ryb2tlLXdpZHRoXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIE1hdGguc3FydChkLndlaWdodCk7IH0pO1xuXG5cdFx0XHRcdGlmICh0ICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0bGlua0VudGVyXG5cdFx0XHRcdFx0XHQvLyAuc3R5bGUoXCJvcGFjaXR5XCIsIDApXG5cdFx0XHRcdFx0XHQuc3R5bGUoXCJzdHJva2VcIiwgXCJncmVlblwiKVxuXHRcdFx0XHRcdC8vIGxpbmtFbnRlci50cmFuc2l0aW9uKHQpXG5cdFx0XHRcdFx0Ly8gXHQuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdC8vXG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gbGluaztcblx0XHRcdH1cblxuXG5cdFx0XHRncmFwaC5ub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcblx0XHRcdFx0ZC5pZCA9IGQuaWQudG9TdHJpbmcoKTtcblx0XHRcdH0pO1xuXHRcdFx0Z3JhcGgubGlua3MuZm9yRWFjaChmdW5jdGlvbihkKSB7XG5cdFx0XHRcdGQuc291cmNlID0gZC5zb3VyY2UudG9TdHJpbmcoKTtcblx0XHRcdFx0ZC50YXJnZXQgPSBkLnRhcmdldC50b1N0cmluZygpO1xuXHRcdFx0XHRkLmlkID0gZ2V0TGlua0lkKGQsIGdyYXBoLmRpcmVjdGVkKTtcblx0XHRcdH0pO1xuXG5cdFx0XHR2YXIgc2ltdWxhdGlvbiA9IGQzLmZvcmNlU2ltdWxhdGlvbigpXG5cdFx0XHRcdC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKCkuaWQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5pZDsgfSkpXG5cdFx0XHRcdC8vIC5mb3JjZShcImxpbmtcIiwgZDMuZm9yY2VMaW5rKCkpXG5cdFx0XHRcdC5mb3JjZShcImNoYXJnZVwiLCBtYW55Qm9keSlcblx0XHRcdFx0LmZvcmNlKFwiY2VudGVyXCIsIGQzLmZvcmNlQ2VudGVyKHdpZHRoIC8gMiwgaGVpZ2h0IC8gMikpO1xuXHRcdGNvbnNvbGUubG9nKCdkZGQnKTtcblxuXHRcdCAgc2ltdWxhdGlvblxuXHRcdFx0ICAubm9kZXMoZ3JhcGgubm9kZXMpXG5cdFx0XHQgIC5vbihcInRpY2tcIiwgdGlja2VkKTtcblxuXHRcdCAgc2ltdWxhdGlvbi5mb3JjZShcImxpbmtcIilcblx0XHRcdCAgLmxpbmtzKGdyYXBoLmxpbmtzKTtcblxuXHRcdCAgb2JqLnNpbXVsYXRpb24gPSBzaW11bGF0aW9uO1xuXG5cdFx0XHR2YXIgc2l6ZVNjYWxlID0gZDMuc2NhbGVMaW5lYXIoKVxuXHRcdFx0XHQucmFuZ2UoWzQsIDEyXSk7XG5cblxuXHRcdFx0dmFyIGcgPSBzdmcuYXBwZW5kKFwiZ1wiKTtcblxuXHRcdCAgdmFyIGxpbmsgPSBnLmFwcGVuZChcImdcIilcblx0XHRcdCAgLmF0dHIoXCJjbGFzc1wiLCBcImxpbmtzXCIpXG5cdFx0XHQvLyAuc2VsZWN0QWxsKFwibGluZVwiKVxuXHRcdFx0LnNlbGVjdEFsbChcIi5saW5rXCIpO1xuXG5cdFx0XHRsaW5rID0gbGluay5kYXRhKGdyYXBoLmxpbmtzLCBmdW5jdGlvbihkKSB7XG5cdFx0XHRcdHJldHVybiBkLmlkO1xuXHRcdFx0fSk7XG5cblx0XHQgIHZhciBub2RlID0gZy5hcHBlbmQoXCJnXCIpXG5cdFx0XHQgIC5hdHRyKFwiY2xhc3NcIiwgXCJub2Rlc1wiKVxuXHRcdFx0LnNlbGVjdEFsbChcIi5ub2RlXCIpO1xuXG5cdFx0XHRub2RlID0gbm9kZS5kYXRhKGdyYXBoLm5vZGVzLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLmlkOyB9KTtcblxuXHRcdFx0bm9kZSA9IGVudGVyTm9kZXMobm9kZSk7XG5cdFx0XHRsaW5rID0gZW50ZXJMaW5rcyhsaW5rKTtcblxuXG5cdFx0XHQvLyBub2RlQ2lyY2xlLm9uKCdjbGljaycsIGZ1bmN0aW9uKGQpIHtcblx0XHRcdC8vIFx0bm9kZS5jbGFzc2VkKCdmb2N1cycsIGZhbHNlKTtcblx0XHRcdC8vIFx0bm9kZS5zZWxlY3RBbGwoXCJ0ZXh0XCIpLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cdFx0XHQvLyBcdG5vZGVDaXJjbGUuYXR0cihcImZpbGxcIiwgXCJibGFja1wiKVxuXHRcdFx0Ly8gXHRcdC5zdHlsZShcIm9wYWNpdHlcIiwgLjEpO1xuXHRcdFx0Ly8gXHRsaW5rLnN0eWxlKFwib3BhY2l0eVwiLCAuMSk7XG5cdFx0XHQvLyBcdHZhciBjb21wb25lbnRfaWRzID0gZ3JhcGguZ3JhcGguY29ubmVjdGVkX2NvbXBvbmVudHNbZC5jb21wb25lbnRdO1xuXHRcdFx0Ly8gXHR2YXIgY29tcG9uZW50ID0gbm9kZS5maWx0ZXIoZnVuY3Rpb24oZCkge3JldHVybiBjb21wb25lbnRfaWRzLmluY2x1ZGVzKGQuaWQpOyB9KTtcblx0XHRcdC8vIFx0dmFyIGNvbXBvbmVudExpbmsgPSBsaW5rLmZpbHRlcihmdW5jdGlvbihkKSB7cmV0dXJuIGNvbXBvbmVudF9pZHMuaW5jbHVkZXMoZC5zb3VyY2UuaWQpO30pXG5cdFx0XHQvLyBcdHZhciBjb21wb25lbnRDb2xvciA9IGQzLnNjYWxlT3JkaW5hbChkMy5zY2hlbWVDYXRlZ29yeTEwKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LmNsYXNzZWQoXCJmb2N1c1wiLCB0cnVlKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LnNlbGVjdEFsbChcImNpcmNsZVwiKS5hdHRyKFwiZmlsbFwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBjb21wb25lbnRDb2xvcihkLmNsX2JvdHRvbSk7IH0pXG5cdFx0XHQvLyBcdFx0LnN0eWxlKFwib3BhY2l0eVwiLCAxKTtcblx0XHRcdC8vIFx0Y29tcG9uZW50LnNlbGVjdEFsbChcInRleHRcIikuc3R5bGUoXCJkaXNwbGF5XCIsIFwiXCIpOyAgLy8gc2hvdyB0aGVzZSBsYWJlbHNcblx0XHRcdC8vIFx0Y29tcG9uZW50TGluay5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG5cdFx0XHQvLyBcdFxuXHRcdFx0Ly8gXHQkKCAnI25vZGVsYWItZm9ybScgKS5jc3MoICd2aXNpYmlsaXR5JyAsICd2aXNpYmxlJyApO1xuXHRcdFx0Ly8gXHRhcHBseVJhZGlvU2VsZWN0aW9uKCk7XG5cdFx0XHQvL1xuXHRcdFx0Ly8gXHRkMy5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRcdC8vXG5cdFx0XHQvLyB9KTtcblxuXG5cblx0XHQgIGZ1bmN0aW9uIHRpY2tlZCgpIHtcblx0XHRcdC8vIG5vZGVcblx0XHRcdC8vICAgICAuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueDsgfSlcblx0XHRcdC8vICAgICAuYXR0cihcImN5XCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQueTsgfSk7XG5cdFx0XHQvLyBhZGQgYm91bmRpbmcgYm94XG5cdFx0XHQvLyAgIGh0dHBzOi8vYmwub2Nrcy5vcmcvbWJvc3RvY2svMTEyOTQ5MlxuXHRcdFx0bm9kZVxuXHRcdFx0XHQuYXR0cihcImN4XCIsIGZ1bmN0aW9uKGQpIHsgXG5cdFx0XHRcdFx0ZC54ID0gTWF0aC5tYXgoZC5yYWRpdXMsIE1hdGgubWluKHdpZHRoIC0gZC5yYWRpdXMsIGQueCkpO1xuXHRcdFx0XHRcdHJldHVybiBkLng7IH0pXG5cdFx0XHRcdC5hdHRyKFwiY3lcIiwgZnVuY3Rpb24oZCkgeyBcblx0XHRcdFx0XHRkLnkgPSBNYXRoLm1heChkLnJhZGl1cywgTWF0aC5taW4od2lkdGggLSBkLnJhZGl1cywgZC55KSk7XG5cdFx0XHRcdFx0cmV0dXJuIGQueTsgfSlcblx0XHRcdFx0LmF0dHIoXCJ0cmFuc2Zvcm1cIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gXCJ0cmFuc2xhdGUoXCIgKyBkLnggKyBcIixcIiArIGQueSArIFwiKVwiOyB9KTtcblxuXHRcdFx0bGlua1xuXHRcdFx0XHQvLyAuc2VsZWN0QWxsKFwibGluZVwiKVxuXHRcdFx0XHQuYXR0cihcIngxXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQuc291cmNlLng7IH0pXG5cdFx0XHRcdC5hdHRyKFwieTFcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5zb3VyY2UueTsgfSlcblx0XHRcdFx0LmF0dHIoXCJ4MlwiLCBmdW5jdGlvbihkKSB7IHJldHVybiBkLnRhcmdldC54OyB9KVxuXHRcdFx0XHQuYXR0cihcInkyXCIsIGZ1bmN0aW9uKGQpIHsgcmV0dXJuIGQudGFyZ2V0Lnk7IH0pO1xuXHRcdCAgfVxuXG5cdFx0XHRmdW5jdGlvbiByZXNldF9sYXlvdXQoKSB7XG5cdFx0XHRcdG5vZGUuY2xhc3NlZChcImZvY3VzXCIsIGZhbHNlKTtcblx0XHRcdFx0bm9kZS5zZWxlY3RBbGwoXCJ0ZXh0XCIpLnN0eWxlKFwiZGlzcGxheVwiLCBcIm5vbmVcIik7XG5cdFx0XHRcdC8vIG5vZGVDaXJjbGUuYXR0cihcImZpbGxcIiwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZC5jb2xvcl9vcmlnOyB9KVxuXHRcdFx0XHQvLyBcdC5zdHlsZShcIm9wYWNpdHlcIiwgMSk7XG5cdFx0XHRcdGxpbmsuc3R5bGUoXCJvcGFjaXR5XCIsIDEpO1xuXHRcdFx0fVxuXHRcdFx0c3ZnLm9uKFwiY2xpY2tcIiwgcmVzZXRfbGF5b3V0KTtcblxuXG5cblxuXHRcdH0pO1xuXHRyZXR1cm4gdGhpcztcblx0fVxuXG59XG5cbmV4cG9ydCBkZWZhdWx0IGQzRm9yY2VOb2RlTGluaztcbiIsImltcG9ydCBkM0ZvcmNlTm9kZUxpbmsgZnJvbSAnLi92aXMuanMnO1xuZXhwb3J0IHsgZDNGb3JjZU5vZGVMaW5rIH07XG5cbiJdLCJzb3VyY2VSb290IjoiIn0=